{% extends "base.html" %}
{% set active_page = "import" %}

{% block head_scripts %}
  {{super()}}
  <script type="text/javascript" src="static/js/jquery.jcarousel.min.js"></script>
  <script type="text/javascript" src="static/js/jquery.pikachoose.js"></script>
  <script type="text/javascript" src="static/js/jquery.pikachoose.min.js"></script>
  <script type="text/javascript" src="static/js/jquery.touchwipe.min.js"></script>
  <script type="text/javascript" src="static/js/flow.js"></script>
  <script type="text/javascript" src="static/js/flow.min.js"></script>
  
  <link rel="stylesheet" type="text/css" href="static/css/simple.css"/>

{% endblock head_scripts %}

{% block body_content%}
  </br>
  </br>
  </br>
  </br>
  <script>
    $(document).ready(function() {
    
      $( "#imgList").PikaChoose({autoPlay : false});
      
      //all of the below code lovingly stolen from the MASIR crew
      var flow = new Flow({
        target: '_upload',
        // 1 for serial debugging, may be higher for production
        simultaneousUploads: 1
      });
      if (!flow.support)
      {
          alert_error("Flow is not supported in current browser");
          return;
      }

      flow.assignBrowse($("#img_impt"),false,true);
      
      flow.on("error", function(message, file) {
              alert_error("[Flow] ERROR: (" + file.name + ") " + message);
              return true;
      });
      
      //flow.on("filesSubmitted", function(array, event) {
          //alert_info("[Flow] Uploading files");
      //    flow.upload();
      //});

      flow.on("fileSuccess", function (file, message) {
          alert_success("[Flow] Success uploading file '" + file.name + ": "
                  + message);
          delete ffid_fpi_map[file.uniqueIdentifier];
      });

      flow.on("fileError", function(file, message) {
          alert_error("[Flow] Error uploading file '" + file.name + ": "
                  + message);
          delete ffid_fpi_map[file.uniqueIdentifier];
      });
      //$( "#img_impt" ).click(function() {
      // flow.
      //});
    });
  </script>
  {% set imgLoc = [
  '/static/img/2014_06_02_BSELL_61649_OD_009.JPG',
  '/static/img/2014_06_02_BSELL_61649_OS_009.JPG',
  '/static/img/aligned_002_2014_04_09_BSELL_80311_OD_007_mapped.jpg',
  '/static/img/aligned_42_OD_80311_2793_SLOwithBScanMap_mapped.jpg',
  '/static/img/aligned_55_2014_07_01_BSELL_80311_OD_013_mapped.jpg',
  '/static/img/aligned_132_20140710_80311_Image_16_OD_mapped.jpg',
  '/static/img/2014_06_05_BSELL_61649_OD_001.JPG',
  '/static/img/2014_06_05_BSELL_61649_OD_010.JPG'
  ] -%}
  
  <div class="row">
    <div class="pikachoose col-md-5" >
      <ul class="col-md-9" id='imgList'>
      {% for path in imgLoc %}
        <li><img src={{ path|escape }}></li>
      {% endfor %}
      </ul>
    </div>
    <div class="row col-md-6" >
        <button class="col-md-4" id="img_impt">Import Image</button>
        <div class="col-md-2"></div>
        <button class="col-md-4">Import Video</button>
    </div>

  </div>
{% endblock body_content %}